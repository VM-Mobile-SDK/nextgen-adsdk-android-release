<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/nextgen-adsdk-android-release/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/nextgen-adsdk-android-release/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(3) > li > ul > li:not(:nth-child(3)) > a, .site-nav > ul:nth-of-type(3) > li > ul > li > ul > li a { background-image: none; } .site-nav > ul:not(:nth-of-type(3)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(3) > li > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(3) > li > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(3) > li > ul > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/nextgen-adsdk-android-release/assets/js/vendor/lunr.min.js"></script> <script src="/nextgen-adsdk-android-release/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Handling the state and events of advertising | AdSDK Documentation</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Handling the state and events of advertising" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Handling the state and events This tutorial will help you observe and respond to changes in the state and events. In it, we will continue the development of the application we started in the previous section." /> <meta property="og:description" content="Handling the state and events This tutorial will help you observe and respond to changes in the state and events. In it, we will continue the development of the application we started in the previous section." /> <link rel="canonical" href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/handling-the-state-and-events-of-advertising.html" /> <meta property="og:url" content="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/handling-the-state-and-events-of-advertising.html" /> <meta property="og:site_name" content="AdSDK Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Handling the state and events of advertising" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Handling the state and events This tutorial will help you observe and respond to changes in the state and events. In it, we will continue the development of the application we started in the previous section.","headline":"Handling the state and events of advertising","url":"https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/handling-the-state-and-events-of-advertising.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/nextgen-adsdk-android-release/" class="site-title lh-tight"> AdSDK Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.0.1" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.0.1</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/creating-customised-advertising.html" class="nav-list-link">Creating customised advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/compose_with_xml_guide.html" class="nav-list-link">How to use AdSDK with XML views</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.0.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.0.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.4.6.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.4.6.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/handling-the-state-and-events-of-advertising.html" class="nav-list-link">Handling the state and events of advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/defining-the-size-of-the-advertisement.html" class="nav-list-link">Defining the size of the advertisement</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/create-and-display-interstitial-ad-section.html" class="nav-list-link">Create and display interstitial ad section</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/global-adRequest-parameters.html" class="nav-list-link">Global ad request parameters</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.4.5.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.4.5.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.5.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.5.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.5.0/handling-the-state-and-events-of-advertising.html" class="nav-list-link">Handling the state and events of advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.5.0/defining-the-size-of-the-advertisement.html" class="nav-list-link">Defining the size of the advertisement</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.5.0/create-and-display-interstitial-ad-section.html" class="nav-list-link">Create and display interstitial ad section</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.5.0/global-adRequest-parameters.html" class="nav-list-link">Global ad request parameters</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.4.4.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.4.4.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.4.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.4.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.4.0/handling-the-state-and-events-of-advertising.html" class="nav-list-link">Handling the state and events of advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.4.0/create-and-display-interstitial-ad-section.html" class="nav-list-link">Create and display interstitial ad section</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.4.0/global-adRequest-parameters.html" class="nav-list-link">Global ad request parameters</a></li></ul> </li> </ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AdSDK Documentation" aria-label="Search AdSDK Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="handling-the-state-and-events"> <a href="#handling-the-state-and-events" class="anchor-heading" aria-labelledby="handling-the-state-and-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handling the state and events </h1> <p>This tutorial will help you observe and respond to changes in the state and events. In it, we will continue the development of the application we started in the previous section.</p> <h2 id="section-1-observing-the-states"> <a href="#section-1-observing-the-states" class="anchor-heading" aria-labelledby="section-1-observing-the-states"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 1: Observing the states </h2> <p>When we talk about state we mean the lifecycle state of the <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad.html">Ads</a> composable.</p> <h3 id="step-1"> <a href="#step-1" class="anchor-heading" aria-labelledby="step-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>The state of an <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad.html">Ad</a> is called <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/index.html">AdState</a>. This is an example of how we can observe the <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/index.html">AdState</a>:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">when</span> <span class="p">(</span><span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">adState</span><span class="o">?.</span><span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Error</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="c1">// We have an error.</span>
    <span class="p">}</span>
    <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Loading</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="c1">// We are Caching.</span>
    <span class="p">}</span>
    <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Caching</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="c1">// We are Caching.</span>
    <span class="p">}</span>
    <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">AdReadyToDisplay</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="c1">// Ad is ready and will be displayed.</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Here we can see the different ad <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/-state/index.html">states</a> we can observe:</p> <ul> <li><a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/-state/-error/index.html">Error</a></li> <li><a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/-state/-loading/index.html">Loading</a></li> <li><a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/-state/-caching/index.html">Caching</a></li> <li> <h2 id="adreadytodisplay"> <a href="#adreadytodisplay" class="anchor-heading" aria-labelledby="adreadytodisplay"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/-state/-ad-ready-to-display/index.html">AdReadyToDisplay</a> </h2> <h3 id="step-2"> <a href="#step-2" class="anchor-heading" aria-labelledby="step-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>Let’s add the code snippet from above to our <code class="language-plaintext highlighter-rouge">AdView</code> example:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AdView</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="py">adState</span> <span class="p">=</span> <span class="nf">rememberAdState</span><span class="p">(</span><span class="n">advertisement</span> <span class="p">=</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">ad</span><span class="p">)</span>
  <span class="nc">Ad</span><span class="p">(</span><span class="n">adState</span> <span class="p">=</span> <span class="n">adState</span><span class="p">,</span> <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">)</span>

  <span class="k">when</span> <span class="p">(</span><span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">adState</span><span class="o">?.</span><span class="n">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Error</span> <span class="p">-&gt;</span> <span class="p">{</span>
          <span class="c1">// We have an error.</span>
      <span class="p">}</span>
      <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Loading</span> <span class="p">-&gt;</span> <span class="p">{</span>
          <span class="c1">// We are Caching.</span>
      <span class="p">}</span>
      <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Caching</span> <span class="p">-&gt;</span> <span class="p">{</span>
          <span class="c1">// We are Caching.</span>
      <span class="p">}</span>
      <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">AdReadyToDisplay</span> <span class="p">-&gt;</span> <span class="p">{</span>
          <span class="c1">// Ad is ready and will be displayed and we could additional work</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> <p>We are able now to act accordingly to each <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_presentation_compose/com.adition.sdk_presentation_compose/-ad-state/index.html">AdState</a> state.</p> </li> </ul> <h2 id="section-2-handling-errors-during-the-loading-and-decoding"> <a href="#section-2-handling-errors-during-the-loading-and-decoding" class="anchor-heading" aria-labelledby="section-2-handling-errors-during-the-loading-and-decoding"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 2: Handling errors during the loading and decoding </h2> <p>Sometimes it’s important for an app to be able to handle errors correctly. With the help of <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-ad-error/index.html">AdError</a>, you can catch a specific error and implement the logic for handling it the way you need.</p> <h3 id="step-1-1"> <a href="#step-1-1" class="anchor-heading" aria-labelledby="step-1-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>We can observe errors in the AdSDK with <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-ad-exception/index.html">AdException</a>. An <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-ad-exception/index.html">AdException</a> holds the exception itself and the type of the error via <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-ad-error/index.html">AdError</a>. With <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-ad-error/index.html">AdError</a> we can observe different error types. For example lets catch a decoding error.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">when</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">adException</span><span class="p">.</span><span class="n">adError</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">AdError</span><span class="p">.</span><span class="nc">DECODING</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="c1">// Act accordingly e.g. repeat the request.</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-2-1"> <a href="#step-2-1" class="anchor-heading" aria-labelledby="step-2-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>You can catch a number of different error types, just check <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-ad-error/index.html">AdError</a>. Let’s just log the error and have a look how our composable should look like.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AdView</span><span class="p">(</span><span class="n">viewModel</span><span class="p">:</span> <span class="nc">MainViewModel</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">adState</span> <span class="p">=</span> <span class="nf">rememberAdState</span><span class="p">(</span><span class="n">advertisement</span> <span class="p">=</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">ad</span><span class="p">)</span>
    <span class="nc">Ad</span><span class="p">(</span><span class="n">adState</span> <span class="p">=</span> <span class="n">adState</span><span class="p">,</span> <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">)</span>

    <span class="k">when</span> <span class="p">(</span><span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">adState</span><span class="o">?.</span><span class="n">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Error</span> <span class="p">-&gt;</span> <span class="p">{</span>
            <span class="k">when</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">adException</span><span class="p">.</span><span class="n">adError</span><span class="p">)</span> <span class="p">{</span>
                <span class="nc">AdError</span><span class="p">.</span><span class="nc">DECODING</span> <span class="p">-&gt;</span> <span class="p">{</span>
                    <span class="nc">Log</span><span class="p">.</span><span class="nf">e</span><span class="p">(</span><span class="s">"MainActivity"</span><span class="p">,</span> <span class="s">"Decoding error: ${state.adException.exception}"</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Loading</span> <span class="p">-&gt;</span> <span class="p">{</span>
            <span class="c1">// We are Caching.</span>
        <span class="p">}</span>
        <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">Caching</span> <span class="p">-&gt;</span> <span class="p">{</span>
            <span class="c1">// We are Caching.</span>
        <span class="p">}</span>
        <span class="k">is</span> <span class="nc">AdState</span><span class="p">.</span><span class="nc">State</span><span class="p">.</span><span class="nc">AdReadyToDisplay</span> <span class="p">-&gt;</span> <span class="p">{</span>
            <span class="c1">// Ad is ready and will be displayed.</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="section-3-observing-the-advertising-events"> <a href="#section-3-observing-the-advertising-events" class="anchor-heading" aria-labelledby="section-3-observing-the-advertising-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 3: Observing the advertising events </h2> <p>Observe the advertising events to respond to them in the application. The SDK can send many events related to advertisements, like impressions, visibility percentages and tap events.</p> <h3 id="step-1-2"> <a href="#step-1-2" class="anchor-heading" aria-labelledby="step-1-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>With the use of the <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-ad-service/index.html">AdService</a> we can collect all ad <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-event/index.html">Event</a>.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">AdService</span><span class="p">.</span><span class="nf">getInstance</span><span class="p">().</span><span class="n">eventHandler</span><span class="o">?.</span><span class="n">events</span><span class="o">?.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">event</span> <span class="p">-&gt;</span>
    <span class="nc">Log</span><span class="p">.</span><span class="nf">d</span><span class="p">(</span><span class="s">"Events"</span><span class="p">,</span> <span class="s">"Collected EVENT - $event"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-2-2"> <a href="#step-2-2" class="anchor-heading" aria-labelledby="step-2-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>Start the event observing before the composable loads if you want to make sure you get every event. For example, we could add it in the <code class="language-plaintext highlighter-rouge">App</code> class.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">App</span><span class="p">:</span> <span class="nc">Application</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">coroutineScope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Dispatchers</span><span class="p">.</span><span class="nc">Default</span> <span class="p">+</span> <span class="nc">SupervisorJob</span><span class="p">())</span>
    
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">()</span>

        <span class="n">coroutineScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">isSuccess</span> <span class="p">=</span> <span class="nc">AdService</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="s">"1800"</span><span class="p">,</span> <span class="n">applicationContext</span><span class="p">,</span> <span class="nc">EventHandler</span><span class="p">())</span>
            <span class="nc">Log</span><span class="p">.</span><span class="nf">d</span><span class="p">(</span><span class="s">"App"</span><span class="p">,</span> <span class="s">"Init is success: $isSuccess"</span><span class="p">)</span>

            <span class="nf">launch</span> <span class="p">{</span>
                <span class="nc">AdService</span><span class="p">.</span><span class="nf">getInstance</span><span class="p">().</span><span class="n">eventHandler</span><span class="o">?.</span><span class="n">events</span><span class="o">?.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">event</span> <span class="p">-&gt;</span>
                    <span class="nc">Log</span><span class="p">.</span><span class="nf">d</span><span class="p">(</span><span class="s">"Events"</span><span class="p">,</span> <span class="s">"Collected EVENT - $event"</span><span class="p">)</span>
                    <span class="k">when</span> <span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">eventType</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">is</span> <span class="nc">EventType</span><span class="p">.</span><span class="nc">Tap</span> <span class="p">-&gt;</span> <span class="p">{</span>
                            <span class="c1">// Ad got tapped.</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-3"> <a href="#step-3" class="anchor-heading" aria-labelledby="step-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3 </h3> <p>You can observe the specific <a href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/4.6.0/sdk_core/com.adition.sdk_core/-event-type/index.html">EventTypes</a> you are interested in. For example, you can react to the tap on ads:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">when</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">eventType</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">is</span> <span class="nc">EventType</span><span class="p">.</span><span class="nc">Tap</span> <span class="p">-&gt;</span> <span class="p">{</span>
        <span class="c1">// Ad got tapped.</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-4"> <a href="#step-4" class="anchor-heading" aria-labelledby="step-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4 </h3> <p>Let’s add this to the App class as well.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">App</span> <span class="p">:</span> <span class="nc">Application</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">coroutineScope</span> <span class="p">=</span> <span class="nc">CoroutineScope</span><span class="p">(</span><span class="nc">Dispatchers</span><span class="p">.</span><span class="nc">Default</span> <span class="p">+</span> <span class="nc">SupervisorJob</span><span class="p">())</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">()</span>

        <span class="n">coroutineScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">isSuccess</span> <span class="p">=</span> <span class="nc">AdService</span><span class="p">.</span><span class="nf">init</span><span class="p">(</span><span class="s">"1800"</span><span class="p">,</span> <span class="n">applicationContext</span><span class="p">,</span> <span class="nc">EventHandler</span><span class="p">())</span>
            <span class="nc">Log</span><span class="p">.</span><span class="nf">d</span><span class="p">(</span><span class="s">"App"</span><span class="p">,</span> <span class="s">"Init is success: $isSuccess"</span><span class="p">)</span>

            <span class="nf">launch</span> <span class="p">{</span>
                <span class="nc">AdService</span><span class="p">.</span><span class="nf">getInstance</span><span class="p">().</span><span class="n">eventHandler</span><span class="o">?.</span><span class="n">events</span><span class="o">?.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">event</span> <span class="p">-&gt;</span>
                    <span class="nc">Log</span><span class="p">.</span><span class="nf">d</span><span class="p">(</span><span class="s">"Events"</span><span class="p">,</span> <span class="s">"Collected EVENT - $event"</span><span class="p">)</span>
                    <span class="k">when</span> <span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">eventType</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">is</span> <span class="nc">EventType</span><span class="p">.</span><span class="nc">Tap</span> <span class="p">-&gt;</span> <span class="p">{</span>
                            <span class="c1">// Ad got tapped.</span>
                        <span class="p">}</span>
                        <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Now we could act accordingly to a specific event in any way we wanted.</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
