<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/nextgen-adsdk-android-release/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/nextgen-adsdk-android-release/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(1) > li > ul > li:not(:nth-child(9)) > a, .site-nav > ul:nth-of-type(1) > li > ul > li > ul > li a { background-image: none; } .site-nav > ul:not(:nth-of-type(1)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(1) > li > ul > li:nth-child(9) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(1) > li > ul > li:nth-child(9) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(1) > li > ul > li.nav-list-item:nth-child(9) > ul.nav-list { display: block; } </style> <script src="/nextgen-adsdk-android-release/assets/js/vendor/lunr.min.js"></script> <script src="/nextgen-adsdk-android-release/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Custom handling of target tap URLs | AdSDK Documentation</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Custom handling of target tap URLs" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Custom handling of target tap URLs" /> <meta property="og:description" content="Custom handling of target tap URLs" /> <link rel="canonical" href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/6.0.0/create-target-url-handler.html" /> <meta property="og:url" content="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/6.0.0/create-target-url-handler.html" /> <meta property="og:site_name" content="AdSDK Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Custom handling of target tap URLs" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Custom handling of target tap URLs","headline":"Custom handling of target tap URLs","url":"https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/6.0.0/create-target-url-handler.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/nextgen-adsdk-android-release/" class="site-title lh-tight"> AdSDK Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.6.0.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.6.0.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/create-target-url-handler.html" class="nav-list-link">Custom handling of target tap URLs</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/creating-customised-advertising.html" class="nav-list-link">Creating customised advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/compose_with_xml_guide.html" class="nav-list-link">How to use AdSDK with XML views</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.3.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.3.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/creating-customised-advertising.html" class="nav-list-link">Creating customised advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/compose_with_xml_guide.html" class="nav-list-link">How to use AdSDK with XML views</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.0.1" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.0.1</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/creating-customised-advertising.html" class="nav-list-link">Creating customised advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/compose_with_xml_guide.html" class="nav-list-link">How to use AdSDK with XML views</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.0.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.0.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.4.6.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.4.6.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/handling-the-state-and-events-of-advertising.html" class="nav-list-link">Handling the state and events of advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/defining-the-size-of-the-advertisement.html" class="nav-list-link">Defining the size of the advertisement</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/create-and-display-interstitial-ad-section.html" class="nav-list-link">Create and display interstitial ad section</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/global-adRequest-parameters.html" class="nav-list-link">Global ad request parameters</a></li></ul> </li> </ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AdSDK Documentation" aria-label="Search AdSDK Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="custom-handling-of-target-tap-urls"> <a href="#custom-handling-of-target-tap-urls" class="anchor-heading" aria-labelledby="custom-handling-of-target-tap-urls"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Custom handling of target tap URLs </h1> <p>Sometimes you need to handle taps in your own way. For example, to display ads in the internal browser in the app. In this tutorial, we will learn how to customise the SDK’s tap handling behaviour.</p> <p>We will continue to build the app, so be sure to follow all the previous tutorials. You can download this <a href="https://github.com/VM-Mobile-SDK/nextgen-adsdk-android-tutorial/tree/extending-sdk/create-target-url-handler">project</a> which has already implemented all steps from this tutorial.</p> <h2 id="section-1-preparing-the-app"> <a href="#section-1-preparing-the-app" class="anchor-heading" aria-labelledby="section-1-preparing-the-app"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 1: Preparing the app </h2> <p>In this section, we will create a screen with a browser that will display the target URL when you click on an inline ad.</p> <h3 id="step-1"> <a href="#step-1" class="anchor-heading" aria-labelledby="step-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>Create a new <code class="language-plaintext highlighter-rouge">BrowserScreen.kt</code> file in <code class="language-plaintext highlighter-rouge">presentation/screens</code> package. In it, we will implement the <code class="language-plaintext highlighter-rouge">BrowserScreen</code> and <code class="language-plaintext highlighter-rouge">BrowserRoute</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">BrowserScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Serializable</span>
<span class="kd">data class</span> <span class="nc">BrowserRoute</span><span class="p">(</span><span class="kd">val</span> <span class="py">url</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">BrowserScreen</span><span class="p">(</span>
    <span class="n">url</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
    <span class="n">navController</span><span class="p">:</span> <span class="nc">NavController</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">context</span> <span class="p">=</span> <span class="nc">LocalContext</span><span class="p">.</span><span class="n">current</span>

    <span class="nc">AppTopBarContainer</span><span class="p">(</span>
        <span class="n">title</span> <span class="p">=</span> <span class="s">"Browser"</span><span class="p">,</span>
        <span class="n">onNavigateBack</span> <span class="p">=</span> <span class="p">{</span> <span class="n">navController</span><span class="p">.</span><span class="nf">navigateUp</span><span class="p">()</span> <span class="p">}</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nc">AndroidView</span><span class="p">(</span>
            <span class="n">factory</span> <span class="p">=</span> <span class="p">{</span>
                <span class="nc">WebView</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
                    <span class="n">webViewClient</span> <span class="p">=</span> <span class="nc">WebViewClient</span><span class="p">()</span>
                    <span class="nf">loadUrl</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="n">update</span> <span class="p">=</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">loadUrl</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> <span class="p">},</span>
            <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxSize</span><span class="p">(),</span>
            <span class="n">onRelease</span> <span class="p">=</span> <span class="p">{</span> <span class="n">webView</span> <span class="p">-&gt;</span>
                <span class="n">webView</span><span class="p">.</span><span class="nf">stopLoading</span><span class="p">()</span>
                <span class="n">webView</span><span class="p">.</span><span class="nf">destroy</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-2"> <a href="#step-2" class="anchor-heading" aria-labelledby="step-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>After that, we add this screen to the navigation in <code class="language-plaintext highlighter-rouge">MainActivity</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">MainActivity.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">ComponentActivity</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="nf">enableEdgeToEdge</span><span class="p">()</span>
        <span class="nf">setContent</span> <span class="p">{</span>
            <span class="nc">TutorialAppTheme</span> <span class="p">{</span>
                <span class="kd">val</span> <span class="py">navController</span> <span class="p">=</span> <span class="nf">rememberNavController</span><span class="p">()</span>

                <span class="nc">NavHost</span><span class="p">(</span>
                    <span class="n">navController</span> <span class="p">=</span> <span class="n">navController</span><span class="p">,</span>
                    <span class="n">startDestination</span> <span class="p">=</span> <span class="nc">MainRoute</span>
                <span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// ...</span>
                    <span class="n">composable</span><span class="p">&lt;</span><span class="nc">BrowserRoute</span><span class="p">&gt;</span> <span class="p">{</span>
                        <span class="kd">val</span> <span class="py">route</span> <span class="p">=</span> <span class="n">it</span><span class="p">.</span><span class="n">toRoute</span><span class="p">&lt;</span><span class="nc">BrowserRoute</span><span class="p">&gt;()</span>
                        <span class="nc">BrowserScreen</span><span class="p">(</span><span class="n">url</span> <span class="p">=</span> <span class="n">route</span><span class="p">.</span><span class="n">url</span><span class="p">,</span> <span class="n">navController</span> <span class="p">=</span> <span class="n">navController</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-3"> <a href="#step-3" class="anchor-heading" aria-labelledby="step-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3 </h3> <p>Since we want <code class="language-plaintext highlighter-rouge">BrowserScreen</code> to open for inline advertising, open <code class="language-plaintext highlighter-rouge">AdItem.kt</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">parentCoroutineScope</span><span class="p">:</span> <span class="nc">CoroutineScope</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

    <span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">_state</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">price</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="nc">Random</span><span class="p">.</span><span class="nf">nextInt</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h3 id="step-4"> <a href="#step-4" class="anchor-heading" aria-labelledby="step-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4 </h3> <p>We create a sealed class <code class="language-plaintext highlighter-rouge">Event</code> and <code class="language-plaintext highlighter-rouge">MutableSharedFlow</code>, which <code class="language-plaintext highlighter-rouge">AdItemState</code> will use to notify <code class="language-plaintext highlighter-rouge">AdItem</code> that we need to navigate to <code class="language-plaintext highlighter-rouge">BrowserScreen</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">parentCoroutineScope</span><span class="p">:</span> <span class="nc">CoroutineScope</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_events</span> <span class="p">=</span> <span class="nc">MutableSharedFlow</span><span class="p">&lt;</span><span class="nc">Event</span><span class="p">&gt;()</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

    <span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">_state</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">events</span> <span class="p">=</span> <span class="n">_events</span><span class="p">.</span><span class="nf">asSharedFlow</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">price</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="nc">Random</span><span class="p">.</span><span class="nf">nextInt</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="c1">// ...</span>

    <span class="k">sealed</span> <span class="kd">class</span> <span class="nc">Event</span> <span class="p">{</span>
        <span class="kd">data class</span> <span class="nc">OpenURL</span><span class="p">(</span><span class="kd">val</span> <span class="py">url</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">:</span> <span class="nc">Event</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h3 id="step-5"> <a href="#step-5" class="anchor-heading" aria-labelledby="step-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 5 </h3> <p>The final step is to collect events inside the composable.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AdItem</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="nc">AdItemState</span><span class="p">,</span> <span class="n">navController</span><span class="p">:</span> <span class="nc">NavController</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">uiState</span> <span class="k">by</span> <span class="n">state</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="nf">collectAsState</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">events</span> <span class="p">=</span> <span class="n">state</span><span class="p">.</span><span class="n">events</span>

    <span class="nc">LaunchedEffect</span><span class="p">(</span><span class="nc">Unit</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">events</span><span class="p">.</span><span class="nf">collect</span> <span class="p">{</span> <span class="n">event</span> <span class="p">-&gt;</span>
            <span class="k">when</span> <span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">is</span> <span class="nc">AdItemState</span><span class="p">.</span><span class="nc">Event</span><span class="p">.</span><span class="nc">OpenURL</span> <span class="p">-&gt;</span> <span class="p">{</span>
                    <span class="n">navController</span><span class="p">.</span><span class="nf">navigate</span><span class="p">(</span><span class="nc">BrowserRoute</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">url</span><span class="p">))</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h2 id="section-2-creating-a-target-url-handler"> <a href="#section-2-creating-a-target-url-handler" class="anchor-heading" aria-labelledby="section-2-creating-a-target-url-handler"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 2: Creating a target URL handler </h2> <p>In this section, we will look at how you can implement custom target URL processing.</p> <h3 id="step-1-1"> <a href="#step-1-1" class="anchor-heading" aria-labelledby="step-1-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>Let’s continue in <code class="language-plaintext highlighter-rouge">AdItemState</code>. As you may have noticed, the <a href="ad_sdk/com.adition.ad_sdk.api.core/-ad-service/make-advertisement.html">AdService.makeAdvertisement</a> method has a parameter called <code class="language-plaintext highlighter-rouge">targetURLHandler</code>, which receives <a href="ad_sdk/com.adition.ad_sdk.api.services.event_handler/-target-url-handler/index.html">TargetURLHandler</a>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">parentCoroutineScope</span><span class="p">:</span> <span class="nc">CoroutineScope</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_events</span> <span class="p">=</span> <span class="nc">MutableSharedFlow</span><span class="p">&lt;</span><span class="nc">Event</span><span class="p">&gt;()</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

    <span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">_state</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">events</span> <span class="p">=</span> <span class="n">_events</span><span class="p">.</span><span class="nf">asSharedFlow</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">price</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="nc">Random</span><span class="p">.</span><span class="nf">nextInt</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="c1">// ...</span>

    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">loadAdvertisement</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span>

        <span class="n">adService</span>
            <span class="p">.</span><span class="nf">makeAdvertisement</span><span class="p">(</span>
                <span class="n">adRequest</span> <span class="p">=</span> <span class="n">request</span><span class="p">,</span>
                <span class="n">placementType</span>  <span class="p">=</span> <span class="nc">AdPlacementType</span><span class="p">.</span><span class="nc">INLINE</span><span class="p">,</span> <span class="c1">// Inline by default</span>
                <span class="n">targetURLHandler</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">adEventListener</span> <span class="p">=</span> <span class="n">eventListener</span>
            <span class="p">)</span>
            <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h3 id="step-2-1"> <a href="#step-2-1" class="anchor-heading" aria-labelledby="step-2-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>The <a href="ad_sdk/com.adition.ad_sdk.api.services.event_handler/-target-url-handler/index.html">TargetURLHandler</a> interface designed to handle target URLs. Let’s implement it.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">parentCoroutineScope</span><span class="p">:</span> <span class="nc">CoroutineScope</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_events</span> <span class="p">=</span> <span class="nc">MutableSharedFlow</span><span class="p">&lt;</span><span class="nc">Event</span><span class="p">&gt;()</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">targetUrlHandler</span><span class="p">:</span> <span class="nc">TargetURLHandler</span> <span class="p">=</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">TargetURLHandler</span> <span class="p">{</span>
        
    <span class="p">}</span>

    <span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">_state</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">events</span> <span class="p">=</span> <span class="n">_events</span><span class="p">.</span><span class="nf">asSharedFlow</span><span class="p">()</span>
    <span class="kd">val</span> <span class="py">price</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="nc">Random</span><span class="p">.</span><span class="nf">nextInt</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="c1">// ...</span>

    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">loadAdvertisement</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span>

        <span class="n">adService</span>
            <span class="p">.</span><span class="nf">makeAdvertisement</span><span class="p">(</span>
                <span class="n">adRequest</span> <span class="p">=</span> <span class="n">request</span><span class="p">,</span>
                <span class="n">placementType</span>  <span class="p">=</span> <span class="nc">AdPlacementType</span><span class="p">.</span><span class="nc">INLINE</span><span class="p">,</span> <span class="c1">// Inline by default</span>
                <span class="n">targetURLHandler</span> <span class="p">=</span> <span class="n">targetUrlHandler</span><span class="p">,</span>
                <span class="n">adEventListener</span> <span class="p">=</span> <span class="n">eventListener</span>
            <span class="p">)</span>
            <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h3 id="step-3-1"> <a href="#step-3-1" class="anchor-heading" aria-labelledby="step-3-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3 </h3> <p><a href="ad_sdk/com.adition.ad_sdk.api.services.event_handler/-target-url-handler/index.html">TargetURLHandler</a> interface has two methods, one of which is optional, so let’s start with it.</p> <p><a href="ad_sdk/com.adition.ad_sdk.api.services.event_handler/-target-url-handler/isValidURL.html">TargetURLHandler.isValidURL</a> will be called every time the SDK wants to validate the target URL. If you return <code class="language-plaintext highlighter-rouge">false</code>, the SDK will return an <a href="ad_sdk/com.adition.ad_sdk.api.entities.exception/-ad-error/invalidTargetURL.html">AdError.invalidTargetURL</a> error in <a href="ad_sdk/com.adition.ad_sdk.api.services.event_listener/-ad-event-listener/tap-event-processing-failed.html">AdEventListener.tapEventProcessingFailed</a>.</p> <p><strong>Note:</strong> If you do not implement this method, all URLs will be considered valid.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="c1">// ...</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_events</span> <span class="p">=</span> <span class="nc">MutableSharedFlow</span><span class="p">&lt;</span><span class="nc">Event</span><span class="p">&gt;()</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">targetUrlHandler</span><span class="p">:</span> <span class="nc">TargetURLHandler</span> <span class="p">=</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">TargetURLHandler</span> <span class="p">{</span>
        <span class="k">override</span> <span class="k">fun</span> <span class="nf">isValidURL</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">=</span> <span class="k">true</span> <span class="c1">// Can be skipped</span>
    <span class="p">}</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h3 id="step-4-1"> <a href="#step-4-1" class="anchor-heading" aria-labelledby="step-4-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4 </h3> <p>The second method is mandatory. The <a href="ad_sdk/com.adition.ad_sdk.api.services.event_handler/-target-url-handler/handleURL.html">TargetURLHandler.handleURL</a> will be called every time the SDK wants the URL to be opened for the user. In our case, we want to emit <code class="language-plaintext highlighter-rouge">Event.OpenURL</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">parentCoroutineScope</span><span class="p">:</span> <span class="nc">CoroutineScope</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_events</span> <span class="p">=</span> <span class="nc">MutableSharedFlow</span><span class="p">&lt;</span><span class="nc">Event</span><span class="p">&gt;()</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">targetUrlHandler</span><span class="p">:</span> <span class="nc">TargetURLHandler</span> <span class="p">=</span> <span class="kd">object</span> <span class="err">: </span><span class="nc">TargetURLHandler</span> <span class="p">{</span>
        <span class="k">override</span> <span class="k">fun</span> <span class="nf">isValidURL</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">=</span> <span class="k">true</span> <span class="c1">// Can be skipped</span>
        <span class="k">override</span> <span class="k">fun</span> <span class="nf">handleURL</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">parentCoroutineScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
                <span class="n">_events</span><span class="p">.</span><span class="nf">emit</span><span class="p">(</span><span class="nc">Event</span><span class="p">.</span><span class="nc">OpenURL</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <p>Now, if you launch the app and tap on the ad, you can see that the target URL opens in the internal browser. Congratulations!</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
