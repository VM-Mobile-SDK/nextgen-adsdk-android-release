<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/nextgen-adsdk-android-release/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/nextgen-adsdk-android-release/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(1) > li > ul > li:not(:nth-child(3)) > a, .site-nav > ul:nth-of-type(1) > li > ul > li > ul > li a { background-image: none; } .site-nav > ul:not(:nth-of-type(1)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(1) > li > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(1) > li > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(1) > li > ul > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/nextgen-adsdk-android-release/assets/js/vendor/lunr.min.js"></script> <script src="/nextgen-adsdk-android-release/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Create and display inline ads | AdSDK Documentation</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Create and display inline ads" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Create and display inline ads" /> <meta property="og:description" content="Create and display inline ads" /> <link rel="canonical" href="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/6.0.0/create-and-display-inline-ads.html" /> <meta property="og:url" content="https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/6.0.0/create-and-display-inline-ads.html" /> <meta property="og:site_name" content="AdSDK Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Create and display inline ads" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Create and display inline ads","headline":"Create and display inline ads","url":"https://vm-mobile-sdk.github.io/nextgen-adsdk-android-release/6.0.0/create-and-display-inline-ads.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/nextgen-adsdk-android-release/" class="site-title lh-tight"> AdSDK Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.6.0.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.6.0.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/create-target-url-handler.html" class="nav-list-link">Custom handling of target tap URLs</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/creating-customised-advertising.html" class="nav-list-link">Creating customised advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/6.0.0/compose_with_xml_guide.html" class="nav-list-link">How to use AdSDK with XML views</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.3.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.3.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/creating-customised-advertising.html" class="nav-list-link">Creating customised advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.3.0/compose_with_xml_guide.html" class="nav-list-link">How to use AdSDK with XML views</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.0.1" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.0.1</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/creating-customised-advertising.html" class="nav-list-link">Creating customised advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.1/compose_with_xml_guide.html" class="nav-list-link">How to use AdSDK with XML views</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.5.0.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.5.0.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/first-steps.html" class="nav-list-link">First steps for working with AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/create-and-display-interstitial-ad.html" class="nav-list-link">Create and display interstitial ad</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/handling-the-ad-events.html" class="nav-list-link">Handling the ad events</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/user-tagging-conversion-tracking.html" class="nav-list-link">User tagging and conversion tracking</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/global-request-parameters.html" class="nav-list-link">Global request parameters</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/5.0.0/cache-management.html" class="nav-list-link">AdSDK Cache Management</a></li></ul> </li> </ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection SDK v.4.6.0" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">SDK v.4.6.0</div> <ul class="nav-list"><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/meet-adsdk.html" class="nav-list-link">Meet nextgen AdSDK</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/create-and-display-inline-ads.html" class="nav-list-link">Create and display inline ads</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/handling-the-state-and-events-of-advertising.html" class="nav-list-link">Handling the state and events of advertising</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/defining-the-size-of-the-advertisement.html" class="nav-list-link">Defining the size of the advertisement</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/create-and-display-interstitial-ad-section.html" class="nav-list-link">Create and display interstitial ad section</a></li><li class="nav-list-item"><a href="/nextgen-adsdk-android-release/4.6.0/global-adRequest-parameters.html" class="nav-list-link">Global ad request parameters</a></li></ul> </li> </ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AdSDK Documentation" aria-label="Search AdSDK Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="create-and-display-inline-ads"> <a href="#create-and-display-inline-ads" class="anchor-heading" aria-labelledby="create-and-display-inline-ads"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create and display inline ads </h1> <p>This tutorial will guide you how to create and display inline ads. An inline ad is an ad created to be displayed in your view hierarchy.</p> <p>We will continue to build the app, so be sure to follow all the previous tutorials. You can download this <a href="https://github.com/VM-Mobile-SDK/nextgen-adsdk-android-tutorial/tree/built-in-capabilities/create-inline-ads">project</a> which has already implemented all steps from this tutorial.</p> <h2 id="section-1-creating-an-inline-ads"> <a href="#section-1-creating-an-inline-ads" class="anchor-heading" aria-labelledby="section-1-creating-an-inline-ads"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 1: Creating an inline ads </h2> <p>Your <a href="ad_sdk/com.adition.ad_sdk.api.core/-ad-service/index.html">AdService</a> is ready for creating advertisements, so in this section, we will create an <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a> for future ad display.</p> <h3 id="step-1"> <a href="#step-1" class="anchor-heading" aria-labelledby="step-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>Lets create an <code class="language-plaintext highlighter-rouge">AdItem</code> composable and an <code class="language-plaintext highlighter-rouge">AdItemState</code> class in <code class="language-plaintext highlighter-rouge">presentation/screens/inline_screen/components</code>. Since we plan to display multiple ads in the <code class="language-plaintext highlighter-rouge">LazyColumn</code>, we will use it to display a single ad.</p> <p>We pass the <a href="ad_sdk/com.adition.ad_sdk.api.core/-ad-service/index.html">AdService</a> to the constructor, which will be used to create the ad later.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AdItem</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="n">text</span> <span class="p">=</span> <span class="s">"Advertisement should be here"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">loadAdvertisement</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-2"> <a href="#step-2" class="anchor-heading" aria-labelledby="step-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>To create advertisements, we use the <a href="ad_sdk/com.adition.ad_sdk.api.core/-ad-service/make-advertisement.html">AdService.makeAdvertisement</a> method. The most important parameter now is <a href="ad_sdk/com.adition.ad_sdk.api.entities.request/-ad-request/index.html">AdRequest</a>, which describes the request that will be sent to the server to receive ads.</p> <p>Let’s pass it through the constructor and look at it in more detail later.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">loadAdvertisement</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">adService</span>
            <span class="p">.</span><span class="nf">makeAdvertisement</span><span class="p">(</span>
                <span class="n">adRequest</span> <span class="p">=</span> <span class="n">request</span><span class="p">,</span>
                <span class="n">placementType</span>  <span class="p">=</span> <span class="nc">AdPlacementType</span><span class="p">.</span><span class="nc">INLINE</span><span class="p">,</span> <span class="c1">// Inline by default</span>
                <span class="n">targetURLHandler</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">adEventListener</span> <span class="p">=</span> <span class="k">null</span> <span class="c1">// Can be skipped</span>
            <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-3"> <a href="#step-3" class="anchor-heading" aria-labelledby="step-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3 </h3> <p>The <a href="ad_sdk/com.adition.ad_sdk.api.core/-ad-service/make-advertisement.html">AdService.makeAdvertisement</a> method returns <a href="ad_sdk/com.adition.ad_sdk.api.entities.exception/-ad-result/index.html">AdResult</a>. If the ad is created and loaded successfully, you will receive the downloaded <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a> object. You can think of it as a ViewModel that holds the data and state of your ad.</p> <p>We store this object and create <code class="language-plaintext highlighter-rouge">ItemData</code>, which we will pass using <code class="language-plaintext highlighter-rouge">PresentationState</code> to our composable.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

    <span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">_state</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>

    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">loadAdvertisement</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span>

        <span class="n">adService</span>
            <span class="p">.</span><span class="nf">makeAdvertisement</span><span class="p">(</span>
                <span class="n">adRequest</span> <span class="p">=</span> <span class="n">request</span><span class="p">,</span>
                <span class="n">placementType</span>  <span class="p">=</span> <span class="nc">AdPlacementType</span><span class="p">.</span><span class="nc">INLINE</span><span class="p">,</span> <span class="c1">// Inline by default</span>
                <span class="n">targetURLHandler</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">adEventListener</span> <span class="p">=</span> <span class="k">null</span> <span class="c1">// Can be skipped</span>
            <span class="p">)</span>
            <span class="p">.</span><span class="k">get</span><span class="p">(</span>
                <span class="n">onSuccess</span> <span class="p">=</span> <span class="p">{</span> <span class="n">ad</span> <span class="p">-&gt;</span>
                    <span class="kd">val</span> <span class="py">data</span> <span class="p">=</span> <span class="nc">ItemData</span><span class="p">(</span><span class="n">ad</span><span class="p">)</span>
                    <span class="n">advertisement</span> <span class="p">=</span> <span class="n">ad</span>
                    <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loaded</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="p">},</span>
                <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span> <span class="n">error</span> <span class="p">-&gt;</span>
                    <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Error</span><span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="n">description</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">data class</span> <span class="nc">ItemData</span><span class="p">(</span>
        <span class="kd">val</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-4"> <a href="#step-4" class="anchor-heading" aria-labelledby="step-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4 </h3> <p>Since <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a> is not a lifecycle-aware object and contains logic related to coroutines, we need to destroy <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a> when we no longer need it. To do this, we must use the <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/dispose.html">Advertisement.dispose</a> method.</p> <p>We add it to <code class="language-plaintext highlighter-rouge">onCleared</code> and will call it later from <code class="language-plaintext highlighter-rouge">ViewModel</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">fun</span> <span class="nf">onCleared</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">advertisement</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
        <span class="n">advertisement</span> <span class="p">=</span> <span class="k">null</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="section-2-displaying-advertisement"> <a href="#section-2-displaying-advertisement" class="anchor-heading" aria-labelledby="section-2-displaying-advertisement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 2: Displaying advertisement </h2> <p>If we have an <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a> instance, it remains to add a <code class="language-plaintext highlighter-rouge">Composable</code> to present it. In this section, we will figure out how to do this.</p> <h3 id="step-1-1"> <a href="#step-1-1" class="anchor-heading" aria-labelledby="step-1-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>We can use <a href="ad_sdk/com.adition.ad_sdk.api.presentation/-ad.html">Ad</a> to display advertisement, which serves as the presentation layer for your inline ad.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AdItem</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="nc">AdItemState</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">uiState</span> <span class="k">by</span> <span class="n">state</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="nf">collectAsState</span><span class="p">()</span>

    <span class="nc">PresentationStateContainer</span><span class="p">(</span>
        <span class="n">uiState</span><span class="p">,</span>
        <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span>
            <span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">aspectRatio</span><span class="p">(</span><span class="mf">2.0f</span><span class="p">)</span>
    <span class="p">)</span> <span class="p">{</span> <span class="n">data</span> <span class="p">-&gt;</span>
        <span class="nc">Box</span><span class="p">(</span>
            <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="nc">Ad</span><span class="p">(</span>
                <span class="n">advertisement</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">advertisement</span><span class="p">,</span>
                <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h3 id="step-2-1"> <a href="#step-2-1" class="anchor-heading" aria-labelledby="step-2-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>The only problem at the moment is that we don’t know the size of the advertisement. But we know that <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a> stores advertising data. Let’s try to get it!</p> <p>We can obtain all possible advertising data using <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/getMetadata.html">Advertisement.getMetadata</a> method that returns <a href="ad_sdk/com.adition.ad_sdk.api.entities.response/-ad-metadata/index.html">AdMetadata</a> instance. This is the one we will use to obtain the size data.</p> <p>We will extend <code class="language-plaintext highlighter-rouge">ItemData</code> and map the result of <a href="ad_sdk/com.adition.ad_sdk.api.core/-ad-service/make-advertisement.html">AdService.makeAdvertisement</a> to obtain <a href="ad_sdk/com.adition.ad_sdk.api.entities.response/-ad-metadata/aspect-ratio.html">AdMetadata.aspectRatio</a>.</p> <p><strong>Note:</strong> The <a href="ad_sdk/com.adition.ad_sdk.api.entities.response/-ad-metadata/index.html">AdMetadata</a> is optional, but you can be sure that if you have not called the <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/reload.html">Advertisement.reload</a> method, the object will be present.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">AdItemState</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span><span class="p">,</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">request</span><span class="p">:</span> <span class="nc">AdRequest</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">ItemData</span><span class="p">&gt;&gt;(</span><span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span><span class="p">)</span>
    <span class="k">private</span> <span class="kd">var</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>

    <span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">_state</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>

    <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">loadAdvertisement</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span>

        <span class="n">adService</span>
            <span class="p">.</span><span class="nf">makeAdvertisement</span><span class="p">(</span>
                <span class="n">adRequest</span> <span class="p">=</span> <span class="n">request</span><span class="p">,</span>
                <span class="n">placementType</span>  <span class="p">=</span> <span class="nc">AdPlacementType</span><span class="p">.</span><span class="nc">INLINE</span><span class="p">,</span> <span class="c1">// Inline by default</span>
                <span class="n">targetURLHandler</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">adEventListener</span> <span class="p">=</span> <span class="k">null</span> <span class="c1">// Can be skipped</span>
            <span class="p">)</span>
            <span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="nc">ItemData</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">it</span><span class="p">.</span><span class="nf">getMetadata</span><span class="p">()</span><span class="o">?.</span><span class="n">aspectRatio</span><span class="p">)</span> <span class="p">}</span>
            <span class="p">.</span><span class="k">get</span><span class="p">(</span>
                <span class="n">onSuccess</span> <span class="p">=</span> <span class="p">{</span> <span class="n">data</span> <span class="p">-&gt;</span>
                    <span class="n">advertisement</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">advertisement</span>
                    <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loaded</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="p">},</span>
                <span class="n">onError</span> <span class="p">=</span> <span class="p">{</span> <span class="n">error</span> <span class="p">-&gt;</span>
                    <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Error</span><span class="p">(</span><span class="n">error</span><span class="p">.</span><span class="n">description</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">onCleared</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">advertisement</span><span class="o">?.</span><span class="nf">dispose</span><span class="p">()</span>
        <span class="n">advertisement</span> <span class="p">=</span> <span class="k">null</span>
    <span class="p">}</span>

    <span class="kd">data class</span> <span class="nc">ItemData</span><span class="p">(</span>
        <span class="kd">val</span> <span class="py">advertisement</span><span class="p">:</span> <span class="nc">Advertisement</span><span class="p">,</span>
        <span class="kd">val</span> <span class="py">aspectRatio</span><span class="p">:</span> <span class="nc">Float</span><span class="p">?</span>
    <span class="p">)</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">suspend</span> <span class="k">fun</span> <span class="p">&lt;</span><span class="nc">T</span><span class="p">,</span> <span class="nc">ActionResult</span><span class="p">&gt;</span> <span class="nf">AdResult</span><span class="p">&lt;</span><span class="nc">T</span><span class="p">&gt;.</span><span class="nf">map</span><span class="p">(</span>
    <span class="n">action</span><span class="p">:</span> <span class="k">suspend</span> <span class="p">(</span><span class="nc">T</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nc">ActionResult</span>
<span class="p">):</span> <span class="nc">AdResult</span><span class="p">&lt;</span><span class="nc">ActionResult</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">when</span> <span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="nc">AdResult</span><span class="p">.</span><span class="nc">Success</span> <span class="p">-&gt;</span> <span class="nc">AdResult</span><span class="p">.</span><span class="nc">Success</span><span class="p">(</span><span class="nf">action</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">result</span><span class="p">))</span>
        <span class="k">is</span> <span class="nc">AdResult</span><span class="p">.</span><span class="nc">Error</span> <span class="p">-&gt;</span> <span class="nc">AdResult</span><span class="p">.</span><span class="nc">Error</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-3-1"> <a href="#step-3-1" class="anchor-heading" aria-labelledby="step-3-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3 </h3> <p>All we have left to do is use the aspect ratio provided, if it is specified in the <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a>. If not, we will use the default 2:1.</p> <p>After that, we can be sure that the ad size is displayed correctly.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AdItem.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AdItem</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="nc">AdItemState</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">uiState</span> <span class="k">by</span> <span class="n">state</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="nf">collectAsState</span><span class="p">()</span>

    <span class="nc">PresentationStateContainer</span><span class="p">(</span>
        <span class="n">uiState</span><span class="p">,</span>
        <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span>
            <span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">aspectRatio</span><span class="p">(</span><span class="mf">2.0f</span><span class="p">)</span>
    <span class="p">)</span> <span class="p">{</span> <span class="n">data</span> <span class="p">-&gt;</span>
        <span class="nc">Box</span><span class="p">(</span>
            <span class="nc">Modifier</span>
                <span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">aspectRatio</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">aspectRatio</span> <span class="o">?:</span> <span class="mf">2.0f</span><span class="p">)</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="nc">Ad</span><span class="p">(</span>
                <span class="n">advertisement</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">advertisement</span><span class="p">,</span>
                <span class="nc">Modifier</span>
                    <span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span>
                    <span class="p">.</span><span class="nf">aspectRatio</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">aspectRatio</span> <span class="o">?:</span> <span class="mf">2.0f</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</code></pre></div></div> <h2 id="section-3-creating-and-displaying-a-list-of-advertisements"> <a href="#section-3-creating-and-displaying-a-list-of-advertisements" class="anchor-heading" aria-labelledby="section-3-creating-and-displaying-a-list-of-advertisements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Section 3: Creating and displaying a list of advertisements </h2> <p>Our <code class="language-plaintext highlighter-rouge">AdItem</code> is ready to load and display a single ad. In this section, we will create a new screen to display the list of advertisements.</p> <h3 id="step-1-2"> <a href="#step-1-2" class="anchor-heading" aria-labelledby="step-1-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1 </h3> <p>First, we will create the top navigation bar, which we will use on future screen.</p> <p>Create <code class="language-plaintext highlighter-rouge">AppTopBarContainer</code> in <code class="language-plaintext highlighter-rouge">ui/components</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">AppTopBarContainer.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@OptIn</span><span class="p">(</span><span class="nc">ExperimentalMaterial3Api</span><span class="o">::</span><span class="k">class</span><span class="p">)</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">AppTopBarContainer</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
    <span class="n">modifier</span><span class="p">:</span> <span class="nc">Modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">,</span>
    <span class="n">onNavigateBack</span><span class="p">:</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="nd">@Composable</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nc">Unit</span> <span class="p">=</span> <span class="p">{}</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="nc">Column</span> <span class="p">{</span>
        <span class="nc">Surface</span><span class="p">(</span>
            <span class="n">modifier</span> <span class="p">=</span> <span class="n">modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">(),</span>
            <span class="n">color</span> <span class="p">=</span> <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">colorScheme</span><span class="p">.</span><span class="n">primaryContainer</span><span class="p">,</span>
            <span class="n">contentColor</span> <span class="p">=</span> <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">colorScheme</span><span class="p">.</span><span class="n">onPrimaryContainer</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="nc">TopAppBar</span><span class="p">(</span>
                <span class="n">title</span> <span class="p">=</span> <span class="p">{</span> <span class="nc">Text</span><span class="p">(</span><span class="n">title</span><span class="p">)</span> <span class="p">},</span>
                <span class="n">navigationIcon</span> <span class="p">=</span> <span class="p">{</span>
                    <span class="nc">IconButton</span><span class="p">(</span><span class="n">onClick</span> <span class="p">=</span> <span class="n">onNavigateBack</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nc">Icon</span><span class="p">(</span>
                            <span class="n">imageVector</span> <span class="p">=</span> <span class="nc">Icons</span><span class="p">.</span><span class="nc">AutoMirrored</span><span class="p">.</span><span class="nc">Filled</span><span class="p">.</span><span class="nc">ArrowBack</span><span class="p">,</span>
                            <span class="n">contentDescription</span> <span class="p">=</span> <span class="s">"Back"</span>
                        <span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">)</span>
        <span class="p">}</span>

        <span class="nf">content</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-2-2"> <a href="#step-2-2" class="anchor-heading" aria-labelledby="step-2-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2 </h3> <p>The next step will be to create <code class="language-plaintext highlighter-rouge">InlineScreen</code> composable and <code class="language-plaintext highlighter-rouge">InlineViewModel</code> in <code class="language-plaintext highlighter-rouge">presentation/screens/inline_screen</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">InlineScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">InlineScreen</span><span class="p">(</span>
    <span class="n">viewModel</span><span class="p">:</span> <span class="nc">InlineViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">(),</span>
    <span class="n">navController</span><span class="p">:</span> <span class="nc">NavController</span>
<span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">InlineViewModel</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span> <span class="p">=</span> <span class="nc">ServiceLocator</span><span class="p">.</span><span class="n">adService</span>
<span class="p">):</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-3-2"> <a href="#step-3-2" class="anchor-heading" aria-labelledby="step-3-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3 </h3> <p>After that, we need to create routes for each of the screens, add a transition from <code class="language-plaintext highlighter-rouge">MainScreen</code> to <code class="language-plaintext highlighter-rouge">InlineScreen</code>, and connect navigation in <code class="language-plaintext highlighter-rouge">MainActivity</code>.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">InlineScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Serializable</span>
<span class="n">data</span> <span class="kd">object</span> <span class="nc">InlineRoute</span>

<span class="c1">// ...</span>
</code></pre></div></div> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">MainScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Serializable</span>
<span class="n">data</span> <span class="kd">object</span> <span class="nc">MainRoute</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">MainScreen</span><span class="p">(</span>
    <span class="n">navController</span><span class="p">:</span> <span class="nc">NavController</span><span class="p">,</span>
    <span class="n">viewModel</span><span class="p">:</span> <span class="nc">MainViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">()</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">uiState</span> <span class="k">by</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="nf">collectAsState</span><span class="p">()</span>

    <span class="nc">PresentationStateContainer</span><span class="p">(</span>
        <span class="n">uiState</span><span class="p">,</span>
        <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxSize</span><span class="p">()</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nc">Column</span><span class="p">(</span>
            <span class="n">verticalArrangement</span> <span class="p">=</span> <span class="nc">Arrangement</span><span class="p">.</span><span class="nc">Center</span><span class="p">,</span>
            <span class="n">horizontalAlignment</span> <span class="p">=</span> <span class="nc">Alignment</span><span class="p">.</span><span class="nc">CenterHorizontally</span><span class="p">,</span>
            <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span>
                <span class="p">.</span><span class="nf">fillMaxSize</span><span class="p">()</span>
                <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">16</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="nc">Button</span><span class="p">(</span>
                <span class="n">onClick</span> <span class="p">=</span> <span class="p">{</span> <span class="n">navController</span><span class="p">.</span><span class="nf">navigate</span><span class="p">(</span><span class="nc">InlineRoute</span><span class="p">)</span> <span class="p">}</span>
            <span class="p">)</span> <span class="p">{</span>
                <span class="nc">Text</span><span class="p">(</span><span class="s">"Inline Ads List"</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ...</span>
</code></pre></div></div> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">MainActivity.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="nc">ComponentActivity</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="nc">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="nf">enableEdgeToEdge</span><span class="p">()</span>
        <span class="nf">setContent</span> <span class="p">{</span>
            <span class="nc">TutorialAppTheme</span> <span class="p">{</span>
                <span class="kd">val</span> <span class="py">navController</span> <span class="p">=</span> <span class="nf">rememberNavController</span><span class="p">()</span>

                <span class="nc">NavHost</span><span class="p">(</span>
                    <span class="n">navController</span> <span class="p">=</span> <span class="n">navController</span><span class="p">,</span>
                    <span class="n">startDestination</span> <span class="p">=</span> <span class="nc">MainRoute</span>
                <span class="p">)</span> <span class="p">{</span>
                    <span class="n">composable</span><span class="p">&lt;</span><span class="nc">MainRoute</span><span class="p">&gt;</span> <span class="p">{</span> <span class="nc">MainScreen</span><span class="p">(</span><span class="n">navController</span> <span class="p">=</span> <span class="n">navController</span><span class="p">)</span> <span class="p">}</span>
                    <span class="n">composable</span><span class="p">&lt;</span><span class="nc">InlineRoute</span><span class="p">&gt;</span> <span class="p">{</span> <span class="nc">InlineScreen</span><span class="p">(</span><span class="n">navController</span> <span class="p">=</span> <span class="n">navController</span><span class="p">)</span> <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-4-1"> <a href="#step-4-1" class="anchor-heading" aria-labelledby="step-4-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4 </h3> <p>Let’s continue working with <code class="language-plaintext highlighter-rouge">InlineScreen</code>. This screen is responsible for creating <code class="language-plaintext highlighter-rouge">AdItemState</code> and displaying <code class="language-plaintext highlighter-rouge">AdItem</code>s.</p> <p><strong>Note:</strong> We start the process of loading all the ads as soon as the screen appears, but you can implement your own logic with bash loading on scroll, or load ads before the screen is displayed, it all depends on your needs.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">InlineScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">InlineScreen</span><span class="p">(</span>
    <span class="n">viewModel</span><span class="p">:</span> <span class="nc">InlineViewModel</span> <span class="p">=</span> <span class="nf">viewModel</span><span class="p">(),</span>
    <span class="n">navController</span><span class="p">:</span> <span class="nc">NavController</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">uiState</span> <span class="k">by</span> <span class="n">viewModel</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="nf">collectAsState</span><span class="p">()</span>

    <span class="nc">PresentationStateContainer</span><span class="p">(</span>
        <span class="n">uiState</span><span class="p">,</span>
        <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxSize</span><span class="p">()</span>
    <span class="p">)</span> <span class="p">{</span> <span class="n">dataSource</span> <span class="p">-&gt;</span>
        <span class="nc">AppTopBarContainer</span><span class="p">(</span>
            <span class="n">title</span> <span class="p">=</span> <span class="s">"Inline Screen"</span><span class="p">,</span>
            <span class="n">onNavigateBack</span> <span class="p">=</span> <span class="p">{</span> <span class="n">navController</span><span class="p">.</span><span class="nf">navigateUp</span><span class="p">()</span> <span class="p">}</span>
        <span class="p">)</span> <span class="p">{</span>
            <span class="nc">LazyColumn</span><span class="p">(</span>
                <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxSize</span><span class="p">()</span>
            <span class="p">)</span> <span class="p">{</span>
                <span class="nf">items</span><span class="p">(</span>
                    <span class="n">dataSource</span><span class="p">,</span>
                    <span class="n">key</span> <span class="p">=</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">id</span> <span class="p">}</span>
                <span class="p">)</span> <span class="p">{</span> <span class="n">itemState</span> <span class="p">-&gt;</span>
                    <span class="nc">AdItem</span><span class="p">(</span><span class="n">itemState</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">InlineViewModel</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span> <span class="p">=</span> <span class="nc">ServiceLocator</span><span class="p">.</span><span class="n">adService</span>
<span class="p">):</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">dataSource</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">&lt;</span><span class="nc">AdItemState</span><span class="p">&gt;()</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">_state</span> <span class="p">=</span> <span class="nc">MutableStateFlow</span><span class="p">&lt;</span><span class="nc">PresentationState</span><span class="p">&lt;</span><span class="nc">List</span><span class="p">&lt;</span><span class="nc">AdItemState</span><span class="p">&gt;&gt;&gt;(</span>
        <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loading</span>
    <span class="p">)</span>

    <span class="kd">val</span> <span class="py">state</span> <span class="p">=</span> <span class="n">_state</span><span class="p">.</span><span class="nf">asStateFlow</span><span class="p">()</span>

    <span class="nf">init</span> <span class="p">{</span>
        <span class="n">viewModelScope</span><span class="p">.</span><span class="nf">launch</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">cellStates</span> <span class="p">=</span> <span class="nf">getDataSource</span><span class="p">()</span>
            <span class="n">dataSource</span><span class="p">.</span><span class="nf">addAll</span><span class="p">(</span><span class="n">cellStates</span><span class="p">)</span>
            <span class="n">_state</span><span class="p">.</span><span class="n">value</span> <span class="p">=</span> <span class="nc">PresentationState</span><span class="p">.</span><span class="nc">Loaded</span><span class="p">(</span><span class="n">cellStates</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">getDataSource</span><span class="p">():</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">AdItemState</span><span class="p">&gt;</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-5"> <a href="#step-5" class="anchor-heading" aria-labelledby="step-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 5 </h3> <p>Let’s focus our attention on the <code class="language-plaintext highlighter-rouge">getDataSource</code> method, because in this method we will implement the logic for filling the <code class="language-plaintext highlighter-rouge">dataSource</code>.</p> <p>As you may recall, to create an ad, we need an <a href="ad_sdk/com.adition.ad_sdk.api.entities.request/-ad-request/index.html">AdRequest</a>. It describes the request that will be sent to the server to get an ad.</p> <p>The only mandatory parameter when creating the <a href="ad_sdk/com.adition.ad_sdk.api.entities.request/-ad-request/index.html">AdRequest</a> is <a href="ad_sdk/com.adition.ad_sdk.api.entities.request/-ad-request/content-unit.html">AdRequest.contentUnit</a> or <a href="ad_sdk/com.adition.ad_sdk.api.entities.request/-ad-request/learning-tag.html">AdRequest.learningTag</a>. Content unit is unique ID of a content space.</p> <p><strong>Note:</strong> You can also use <a href="ad_sdk/com.adition.ad_sdk.api.entities.request/-ad-request/learning-tag.html">AdRequest.learningTag</a>, but we use <a href="ad_sdk/com.adition.ad_sdk.api.entities.request/-ad-request/content-unit.html">AdRequest.contentUnit</a> in this tutorial because it is more commonly used.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">InlineScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">InlineViewModel</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span> <span class="p">=</span> <span class="nc">ServiceLocator</span><span class="p">.</span><span class="n">adService</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">private</span> <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">getDataSource</span><span class="p">():</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">AdItemState</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">supervisorScope</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">requests</span> <span class="p">=</span> <span class="nc">List</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
            <span class="nc">AdRequest</span><span class="p">(</span>
                <span class="n">contentUnit</span> <span class="p">=</span> <span class="s">"4810915"</span><span class="p">,</span>
                <span class="n">profiles</span> <span class="p">=</span> <span class="nf">hashMapOf</span><span class="p">(),</span> <span class="c1">// Can be skipped</span>
                <span class="n">keywords</span> <span class="p">=</span> <span class="nf">listOf</span><span class="p">(),</span> <span class="c1">// Can be skipped</span>
                <span class="n">window</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">timeoutAfterSeconds</span> <span class="p">=</span> <span class="mi">10u</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">gdprPd</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">campaignId</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">bannerId</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">isSHBEnabled</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">dsa</span> <span class="p">=</span> <span class="k">null</span> <span class="c1">// Can be skipped</span>
            <span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-6"> <a href="#step-6" class="anchor-heading" aria-labelledby="step-6"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 6 </h3> <p>Time to load ads! Since we want to load all the ads in parallel, we’ll use a <code class="language-plaintext highlighter-rouge">async</code> coroutine to for that.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">InlineScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">InlineViewModel</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span> <span class="p">=</span> <span class="nc">ServiceLocator</span><span class="p">.</span><span class="n">adService</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">private</span> <span class="k">suspend</span> <span class="k">fun</span> <span class="nf">getDataSource</span><span class="p">():</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">AdItemState</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">supervisorScope</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">requests</span> <span class="p">=</span> <span class="nc">List</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
            <span class="nc">AdRequest</span><span class="p">(</span>
                <span class="n">contentUnit</span> <span class="p">=</span> <span class="s">"4810915"</span><span class="p">,</span>
                <span class="n">profiles</span> <span class="p">=</span> <span class="nf">hashMapOf</span><span class="p">(),</span> <span class="c1">// Can be skipped</span>
                <span class="n">keywords</span> <span class="p">=</span> <span class="nf">listOf</span><span class="p">(),</span> <span class="c1">// Can be skipped</span>
                <span class="n">window</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">timeoutAfterSeconds</span> <span class="p">=</span> <span class="mi">10u</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">gdprPd</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">campaignId</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">bannerId</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">isSHBEnabled</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// Can be skipped</span>
                <span class="n">dsa</span> <span class="p">=</span> <span class="k">null</span> <span class="c1">// Can be skipped</span>
            <span class="p">)</span>
        <span class="p">}</span>

        <span class="n">requests</span>
            <span class="p">.</span><span class="nf">mapIndexed</span> <span class="p">{</span> <span class="n">index</span><span class="p">,</span> <span class="n">request</span> <span class="p">-&gt;</span>
                <span class="nf">async</span> <span class="p">{</span>
                    <span class="kd">val</span> <span class="py">itemState</span> <span class="p">=</span> <span class="nc">AdItemState</span><span class="p">(</span>
                        <span class="n">index</span><span class="p">,</span>
                        <span class="n">adService</span><span class="p">,</span>
                        <span class="n">request</span>
                    <span class="p">)</span>

                    <span class="n">itemState</span><span class="p">.</span><span class="nf">loadAdvertisement</span><span class="p">()</span>
                    <span class="n">itemState</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="p">.</span><span class="nf">awaitAll</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="step-7"> <a href="#step-7" class="anchor-heading" aria-labelledby="step-7"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 7 </h3> <p>At this point, we can already see the list of advertisements, but in order to avoid possible leaks, we must clear the <a href="ad_sdk/com.adition.ad_sdk.api.core/-advertisement/index.html">Advertisement</a>s when we no longer need them.</p> <p>To do this, we will use the <code class="language-plaintext highlighter-rouge">onCleared</code> method.</p> <p><strong>File:</strong> <code class="language-plaintext highlighter-rouge">InlineScreen.kt</code></p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ...</span>
<span class="kd">class</span> <span class="nc">InlineViewModel</span><span class="p">(</span>
    <span class="k">private</span> <span class="kd">val</span> <span class="py">adService</span><span class="p">:</span> <span class="nc">AdService</span> <span class="p">=</span> <span class="nc">ServiceLocator</span><span class="p">.</span><span class="n">adService</span>
<span class="p">)</span> <span class="p">:</span> <span class="nc">ViewModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCleared</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="nf">onCleared</span><span class="p">()</span>
        <span class="n">dataSource</span><span class="p">.</span><span class="nf">onCleared</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">fun</span> <span class="nf">List</span><span class="p">&lt;</span><span class="nc">AdItemState</span><span class="p">&gt;.</span><span class="nf">onCleared</span><span class="p">()</span> <span class="p">=</span> <span class="nf">forEach</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">onCleared</span><span class="p">()</span> <span class="p">}</span>
</code></pre></div></div> <p>Now, if you did everything right, you can launch the app and see the list of advertisement. Congratulations!</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
