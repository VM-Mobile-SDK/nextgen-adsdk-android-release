<!doctype html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>sdk_core</title>
<link href="../images/logo-icon.svg" rel="icon" type="image/svg">    <script>var pathToRoot = "../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../scripts/sourceset_dependencies.js" async></script>
<link href="../styles/style.css" rel="Stylesheet">
<link href="../styles/main.css" rel="Stylesheet">
<link href="../styles/prism.css" rel="Stylesheet">
<link href="../styles/logo-styles.css" rel="Stylesheet">
<link href="../styles/font-jb-sans-auto.css" rel="Stylesheet">
<script type="text/javascript" src="../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../scripts/main.js" defer></script>
<script type="text/javascript" src="../scripts/prism.js" async></script>
<script type="text/javascript" src="../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
    <div class="root">
<nav class="navigation" id="navigation-wrapper">
    <div class="navigation--inner">
        <div class="navigation-title">
            <button class="menu-toggle" id="menu-toggle" type="button">toggle menu</button>
            <div class="library-name">
<a class="library-name--link" href="../index.html">
                            nextgenAdSDK
                    </a>            </div>
            <div class="library-version">
            </div>
        </div>
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":sdk_core:dokkaHtmlPartial/release">androidJvm</button>
        </div>
    </div>
    <div class="navigation-controls">
        <button class="navigation-controls--btn navigation-controls--theme" id="theme-toggle-button" type="button">switch theme</button>
        <div class="navigation-controls--btn navigation-controls--search" id="searchBar" role="button">search in API</div>
    </div>
</nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="sidebar--inner" id="sideMenu"></div>
            </div>
            <div id="main">
<div class="main-content" id="content" pageids="sdk_core::////PointingToDeclaration//-215846705">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <h1 class="cover"><span><span>sdk_core</span></span></h1>
    <div class="platform-hinted UnderCoverText" data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":sdk_core:dokkaHtmlPartial/release"><h2 class=""> Description</h2><p class="paragraph">This module contains the Adition AdSDK for Android.</p><h2 class=""> Getting started</h2><p class="paragraph">To serve Advertisements using the Adition AdSDK you will typically</p><ul><li><p class="paragraph">Add the package dependencies</p></li><li><p class="paragraph">Initialize and configure the AdService</p></li><li><p class="paragraph">Register Ad Renderers</p></li><li><p class="paragraph">Request Ads and use AdState</p></li></ul><p class="paragraph">Apps using this AdSDK must be built at least for Android SDK Level 24.</p><p class="paragraph">For a step by step documentation with example code, please refer to the <a href="https://github.com/VM-Mobile-SDK/nextgen-adsdk-android-release#readme">getting started documentation.</a></p><h2 class=""> AdSDK concepts explained</h2><p class="paragraph">To use the ADITION AdSDK the application developer will need to acquire the Ad SDK library as well as “networkId” and “contentUnitId” pairs from an ADITION customer.</p><p class="paragraph">Your App uses the AdSDK to request ads from the Adserver.<br>To enable the adserver to serve relevant ads, you can pass information when requesting ads: </p><ul><li><p class="paragraph">Network ID (required)</p></li><li><p class="paragraph">contentUnit (required)</p></li><li><p class="paragraph">timeoutAfterSeconds (optional)</p></li><li><p class="paragraph">profiles (optional)</p></li><li><p class="paragraph">keywords (optional)</p></li><li><p class="paragraph">windowId (optional)</p></li><li><p class="paragraph">gdprPd (optional)</p></li><li><p class="paragraph">serverSideHeaderBidding (optional)</p></li><li><p class="paragraph">campaignId (optional)</p></li><li><p class="paragraph">bannerId (optional)</p></li><li><p class="paragraph">dsa (optional)</p></li><li><p class="paragraph">placementType (optional)</p></li><li><p class="paragraph">targetURLHandler (optional)</p></li></ul><p class="paragraph">Regarding targetURLHandler, by default, the SDK opens an external browser when processing a target URL.  You can override this behaviour with your own. For more Info's and an Example see #handling-inApp-clickURL </p><p class="paragraph">For placementType the default value is 'PlacementType.INLINE'.  If you want to present an Ad as a interstitial you have to select: PlacementType.INTERSTITIAL. Be careful, do not use interstitial in a Column or LazyColumn.  Because it will only work properly in a view which could be shown as fullscreen modal.</p><h2 class=""> Important Classes &amp; Functions</h2><p class="paragraph">When dealing with Ads you will interact with the following classes:</p><ul><li><p class="paragraph">AdService - for cookie handling, configuring and management of the cache. You create and use this as a singleton.</p></li><li><p class="paragraph">Advertisement - represents an advertisement with methods for loading the Ad content. </p></li></ul><p class="paragraph">These classes allow the configuration and loading of Ads independent from any display technology. If your app is using Compose, then use the <code class="lang-kotlin">sdk_presentation_compose</code> package which adds additional classes that deal with the rendering and presentation of Ads:</p><ul><li><p class="paragraph"><code class="lang-kotlin">Ad</code> is a Composable you can put into your view hierarchy that can render an Ad.</p></li><li><p class="paragraph"><code class="lang-kotlin">Ad</code> depends on a <code class="lang-kotlin">AdState</code> object that represents the state and model of an Advertisement.</p></li></ul><h2 class=""> How to setup the AdService</h2><p class="paragraph"><code class="lang-kotlin">AdService.init(NETWORK_ID, CONTEXT, EVENTHANDLER)</code></p><ul><li><p class="paragraph">You have to call this before your do anything else regarding AdServer requests.</p></li><li><p class="paragraph"><code class="lang-kotlin">init</code> returns true if the AdService is successfully configured or false if not.</p></li></ul><h2 class=""> Displaying Ads</h2><p class="paragraph">The Composable that will be used to display a mobile creative is called <code class="lang-kotlin">Ad</code>. </p><p class="paragraph">For Compose based Apps, there are two ways for displaying Ads:</p><h3 class=""> Option one - convenient</h3><p class="paragraph">Use the <code class="lang-kotlin">rememberAdState</code> function to fetch an Ad's based on your desired parameters (contentUnit, profiles, keywords).  </p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val adState = rememberAdState("4810915")</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph"><code class="lang-kotlin">rememberAdState</code> returns and <code class="lang-kotlin">AdState</code> object, which you use during initialization of the <code class="lang-kotlin">Ad</code> composable:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea"> Ad(adState = adState, modifier = Modifier<br>                        .width(500.dp)<br>                        .height(300.dp))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">That's all!</p><h3 class=""> Option two – fine grained control</h3><p class="paragraph"><i>Alternatively</i>, if you need more control about when requests for Ads actually happen OR if you want to load a large number of ads concurrently, you can chose this alternative way:</p><p class="paragraph">Create an <code class="lang-kotlin">Advertisement</code> object directly using the desired parameters (contentUnit, profiles, keywords) and the list of all ad renderers that are available:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val myAd = Advertisement("4810915", AdComposeRenderRegistry.getAllRendererNames())</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">You now can trigger fetching and decoding when it's convenient for you using the <code class="lang-kotlin">Advertisments</code> <code class="lang-kotlin">.loadAdvertisement</code> method.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">viewModelScope.launch {<br>	myAd.loadAdvertisement()<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">For displaying <code class="lang-kotlin">Ad</code> composable, use the variant of <code class="lang-kotlin">rememberAdState</code> which accepts an <code class="lang-kotlin">Advertisement</code> object:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">Ad(adState = rememberAdState(myAd))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Details</h2><h3 class=""> Network ID and ContentUnit</h3><p class="paragraph">The network id and the content unit id will be required to create Advertisements. The content unit id is a unique id and is the id of an AdSDK Content Unit in the ADITION AdServing Platform. Currently ADITION supports two kinds of AdSDK Content Units, the fixed size and the variable size content units. The fixed size content unit only allows banners to be placed if they match the size of the fixed content unit width and height. The variable size content unit allows banners to be placed if they fall between a lower and upper width and height range.</p><h3 class=""> Profiles</h3><p class="paragraph">When requesting a banner it is possible to send application targeting profiles which can be used to select the correct banner that should be delivered. </p><p class="paragraph">Profile targeting allows the developer to add key and value pairs to the banner request. Profile targeting allows for complex targeting of banners as one is able to set key and value pairs for example (key,value) as ("gender","male") and ("activity","news") which will allow a banner to match with the profile expression "gender='male' and activity='news'".</p><p class="paragraph">Keys must match the following regular expression:    <code class="lang-kotlin">`^[A-Za-z_0-9~.-]{1,60}$`</code> Values must match the following regular expression:    <code class="lang-kotlin">`^[A-Za-z_0-9~.-]{1,255}$`</code></p><p class="paragraph">Other characters can not be guaranteed to work properly. Additionally keys may only start with a character. </p><p class="paragraph">The SDK will validate that the given profile matches this criteria.  If the profiles fail validation, a <code class="lang-kotlin">`SdkInternalException`</code> will be thrown.</p><p class="paragraph">You can use profile-targeting variables in several ways:</p><p class="paragraph">As a parameter for rememberAdState:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val profiles = hashMapOf("prof1" to "val1")<br><br>val adState = rememberAdState("4810915", wi="12345", profiles=profiles)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Or alternatively, using the Advertisement object:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val profiles = hashMapOf("prof1" to "val1")<br><br>val ad = Advertisement("4810915", AdComposeRenderRegistry.getAllRendererNames(), wi = "12345", profiles = profiles)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Using the ADITION Window ID</h3><p class="paragraph">The ADITION AdSDK provides functionality to organize window ids so that inclusion and exclusion filters can be evaluated.</p><p class="paragraph">Naturally, the window id does not expire after a specific time. Keep in mind though, that it can not be guaranteed for a window id to function properly after a waiting time of 60 seconds between requests with that same window id.</p><p class="paragraph">To use the same window id, you can pass a value when creating an Advertisement object:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// use windowId "12345"<br><br>val adState = rememberAdState("4810915", wi="12345")</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Or alternatively, using the Advertisement object:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// use windowId "12345"<br><br>val ad = Advertisement("4810915", AdComposeRenderRegistry.getAllRendererNames(), wi = "12345")</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Handling inApp-ClickURL</h3><p class="paragraph">inApp-ClickURLs is a feature which allows you to specify a custom schemed click url. An example of a custom scheme url is <code class="lang-kotlin">`myschema://coupons`</code>. Banners with this option selected will not open a browser when it is clicked. It will attempt to fire an intent which has been registered to handle the custom schemed click url.</p><p class="paragraph">The ADITION click counting works by initially calling the adserver url which will then count the click and redirect to the banner click url. By default this is done by the built-in ADITION browser. The exception to this default click handling is with inApp-ClickURL banners, as they are handled by the SDK internally which ensures the click is successfully counted and the intent fired.</p><p class="paragraph">It is important that the app has registered intent-filters for the banner being delivered otherwise the fired intent will be silently ignored.</p><p class="paragraph">It is possible to have multiple http-schema redirects with this option activated, but they will be silently requested and ignored if they don't end up redirecting to a custom schema. Using common schemas like http will result in a dialog popup which will request the user to select the (default) app to handle the intent.</p><p class="paragraph">Like mentioned in the #adSDK-concepts-explained chapter, by default,  the SDK opens an external browser when processing a target URL. You can override this behaviour with your own. For example, this can be useful if you want to open your internal browser in your application to process the target URL. To do this, you pass the <code class="lang-kotlin">TargetURLHandler</code> to the <code class="lang-kotlin">Advertisement</code> or <code class="lang-kotlin">rememberAdState</code> method.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">class CustomerTargetURLHandler() : TargetURLHandlerInterface {<br>    override fun isValidURL(url: Uri): Boolean {<br>        // Here you can do what you want to do....<br>        return true<br>    }<br><br><br>    override fun handleURL(url: Uri) {<br>        // Here you can do what you want to do....<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Keyword-Targeting</h3><p class="paragraph">The keyword targeting is a simple comma separated list of keywords that can be used to make partial or complete keyword list targeting.</p><p class="paragraph">The keyword list can be set using in several ways:</p><p class="paragraph">As a parameter for rememberAdState:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">kw = listOf("keyword1", "keyword2", "keyword3"),<br>val adState = rememberAdState("4810915", wi="12345", keywords=kw)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Or alternatively, using the Advertisement object:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">kw = listOf("keyword1", "keyword2", "keyword3"),<br>val ad = Advertisement("4810915", AdComposeRenderRegistry.getAllRendererNames(), wi = "12345", keywords = kw)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">The SDK will validate that the given keywords matches this regular expression: "^A-Za-z0-9_~.-{1,255}$".  In case the keywords are invalid, an AdError will be created.  See <code class="lang-kotlin">`AdError/keywordsValidationFailed`</code></p><p class="paragraph">This targeting is generally useful for category and meta type targeting. Most campaigns will use profile targeting instead as it provides a syntactical targeting which is superior.</p><h3 class=""> Tagging</h3><p class="paragraph">Tagging targeting is a server side tagging (user profile) feature. You are able to tag a user currently using your application with key = value tags that can be used in targeting of campaigns within the ADITION adserving platform. A Tag in ADITION consists of a key and a value. The key is made up of 2 parts. The attribute and the sub-attribute. An example of a tag could be:</p><p class="paragraph">  MyShop.ProductNumber = '123'</p><p class="paragraph">The Tags can be setup on the adition server to keep all the tags or always overwrite with the last sent tag. Therefore it is possible to have a history or the most current tag value.</p><p class="paragraph">The client/app can fire the tag request as soon as an event or action occurs within the app. The AdDelivery requests made after a tag was sent will be able to use the tags within the targeting.</p><p class="paragraph">Tag requests can be fired by using the <code class="lang-kotlin">tagUser</code> method of the <code class="lang-kotlin">AdService</code> singleton:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">AdService.getInstance().tagUser(listOf(TagRequest("segments", "category", "home")))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Events</h2><p class="paragraph">Advertisements will emit two types of events:</p><ul><li><p class="paragraph">Lifecycle events</p></li><ul><li><p class="paragraph">Loading, </p></li><li><p class="paragraph">Caching, </p></li><li><p class="paragraph">AdReadyToDisplay </p></li><li><p class="paragraph">and, conditionally, Error.</p></li></ul><li><p class="paragraph">Tracking events </p></li><ul><li><p class="paragraph">Tap = user triggered a URL, for example by tapping on an Ad</p></li><li><p class="paragraph">Impression = the ad has been rendered, irregardless if it has been seen by the user or not. Can be triggered if the add is outside of the viewport</p></li><li><p class="paragraph">Viewable = At least 1%/50%/100% of the Ad has been actually seen by the user.</p></li><li><p class="paragraph">CustomRendererEvent = Signals that the renderer has passed a custom event.</p></li></ul></ul><p class="paragraph">Some tracking events should be enabled in the Adition Backend. </p><p class="paragraph">You can observe lifecycle events like this:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">when (val state = adState.state) {
    is AdState.State.Error -&gt; {
        Text(text = "error")
    }
    is AdState.State.Loading -&gt; CircularProgressIndicator(
        modifier = Modifier.size(
            64.dp
        )
    )
    is AdState.State.Caching -&gt; {
        Text(text = "Loading ad...")
    }
    is AdState.State.AdReadyToDisplay -&gt; {
    }
}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">You can observe the tracking events like this:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">AdService.getInstance().eventHandler!!.events.collectLatest {
    Log.e("MainActivity", "Collected EVENT - $it")
}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> GDPR, Personal data </h2><p class="paragraph">Your app can determine how personal data of the user is processed in the AdServer. The AdServer supports the <a href="https://iabeurope.eu/transparency-consent-framework/">TCF-Format</a> for expressing user choice for data processing.</p><p class="paragraph">Use <code class="lang-kotlin">AdService.getInstance().setAdRequestGlobalParameter()</code> to set data-sharing preferences for the ad requests.</p><p class="paragraph">Use <code class="lang-kotlin">AdService.getInstance().removeAdRequestGlobalParameter()</code> can be used to reset a user's choice for the Ad requests.</p><p class="paragraph">Use <code class="lang-kotlin">AdService.getInstance().setTrackingGlobalParameter()</code> to set data-sharing preferences for the tag and track requests.</p><p class="paragraph">Use <code class="lang-kotlin">AdService.getInstance().removeTrackingGlobalParameter()</code> can be used to reset a user's choice for the tag and track requests.</p><p class="paragraph">For example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val consentData = "CPu2HEAPu2HEAAFADBDEDNCoAPLAAAAAAAYgAtwAgATgBbAAAAAA.YAAAAAAAAAAA"<br><br>// For the ad request<br>AdService.getInstance().setAdRequestGlobalParameter(AdRequestGlobalParameters::gdpr, GDPR(consentData, null))<br><br>// For the tag and track requests<br>AdService.getInstance().setTrackingGlobalParameter(TrackingGlobalParameters::gdpr, GDPR(consentData, null))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> Opt Out</h3><p class="paragraph">If your app allows users to opt out from processing personal data in the AdServer, you can set this choice on a same way, using <code class="lang-kotlin">AdService.getInstance().setAdRequestGlobalParameter()</code> or <code class="lang-kotlin">AdService.getInstance().setTrackingGlobalParameter()</code>.</p><p class="paragraph">For example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// For the ad request<br>AdService.getInstance().setAdRequestGlobalParameter(AdRequestGlobalParameters::isOptOutEnabled, true)<br><br>// For the tag and track requests<br>AdService.getInstance().setTrackingGlobalParameter(TrackingGlobalParameters::isOptOutEnabled, false)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">If set, user choices regarding consent data and opt-out will be included with every subsequent request. Choices are not being persisted across app restarts. You have to set it every time your app launches and whenever user choice changes.</p><h3 class=""> GDPR PD</h3><p class="paragraph">If your app passes personal information as part of the user profiles, you can set a <code class="lang-kotlin">gdprPd</code> parameter when creating an Advertisement:</p><p class="paragraph">For example:</p><div class="sample-container"><pre><code class="block lang- " theme="idea">// no personal data in profiles =&gt; set gdprPd to false<br>val ad = Advertisement("4810915", AdComposeRenderRegistry.getAllRendererNames(), profiles = p, gdprPd = false)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h3 class=""> External User IDs</h3><p class="paragraph">If your app has means to identify a user, for example through association with  an user account  or an advertising ID, you can share this with the AdServer:</p><p class="paragraph">For example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val externalId = "externalIdCPu2HEAPu2HEAAFADBDEDNCoAPLAAAAAAAYgAtwAgATgBb"<br><br>// For the ad request<br>AdService.getInstance().setAdRequestGlobalParameter(AdRequestGlobalParameters::externalUID, ExternalUID(externalId, true))<br><br>// For the tag and track requests<br>AdService.getInstance().setTrackingGlobalParameter(TrackingGlobalParameters::externalUID, ExternalUID(externalId, true))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">Set <code class="lang-kotlin">isExternalUidStable</code> to false if the ID can change, for example if it is an advertising ID.</p><h3 class=""> User Ids</h3><p class="paragraph">The data type of the userId is an array with the <code class="lang-kotlin">GlobalParameters/UserId</code> enum values.</p><p class="paragraph">For example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">// For the ad request<br>AdService.getInstance().setAdRequestGlobalParameter(<br>    AdRequestGlobalParameters::userIds,<br>    listOf(UserId(UserIdType.IDFA, "CCCCCCC"), UserId(UserIdType.NETID, "AEBE52E7-03EE-6666-AAAA-E57283966239"))<br>)<br><br>// For the tag and track requests<br>AdService.getInstance().setTrackingGlobalParameter(<br>    TrackingGlobalParameters::userIds,<br>    listOf(UserId(UserIdType.IDFA, "CCCCCCC"), UserId(UserIdType.NETID, "AEBE52E7-03EE-6666-AAAA-E57283966239"))<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Server Side Header Bidding</h2><p class="paragraph">Defines, if the request should also consider the server side header bidding. Enabled if the value is <code class="lang-kotlin">true</code>, disabled if the value is <code class="lang-kotlin">false</code>.</p><p class="paragraph">For example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">AdService.getInstance().setAdRequestGlobalParameter(AdRequestGlobalParameters::isSHBEnabled, true)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">This preference will be submitted to the AdServer with every subsequent ad request.  Users preference will not be persisted across app restarts. You have to set it every time your app launches and whenever the user ID changes.</p><h2 class=""> Digital Service Act (DSA)</h2><p class="paragraph">Digital Service Act (“DSA”) is a EU regulation which aims among other things to increase transparency on online platforms for users in relation to recommended content – including advertising. <a href="https://digital-strategy.ec.europa.eu/en/policies/digital-services-act-package">See more.</a>.</p><p class="paragraph">You can specify this parameter with <code class="lang-kotlin">AdRequestGlobalParameters</code>. For example:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">AdService.getInstance().setAdRequestGlobalParameter(<br>    AdRequestGlobalParameters::dsa,<br>    DSA(<br>        DSARequirement.REQUIRED,<br>        DSAPubRender.WILL_RENDER,<br>        DSADataToPubs.SEND_TRANSPARENCY<br>    )<br>)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Errors</h2><p class="paragraph">If an error prevents an Advertisement from being delivered or rendered, the Advertisement's AdState will be AdException. AdException contains two properties. An adError and a exception.</p><ul><li><p class="paragraph">AdException</p></li><ul><li><p class="paragraph">The adError is an constant of the type ErrorCode.</p></li><li><p class="paragraph">AdError is the object which contains the different custom AdSDK ErrorCode types.</p></li><li><p class="paragraph">The exception is an optional Android/Kotlin exception.</p></li></ul><li><p class="paragraph">Different types of AdError</p></li><ul><li><p class="paragraph">CONFIGURATION - "AdService is not configured" = Using of AdService.getInstance without initialize the AdService before,</p></li><li><p class="paragraph">DECODING - "Decoding failed" = The decoding of the Response from the AdService is failing.</p></li><li><p class="paragraph">UNKNOWN_RENDERER - "Unknown renderer received" = The renderer name received is not registered.</p></li><li><p class="paragraph">PROFILE_VALIDATION_FAILED - "Profile validation failed" = At least one of the used profiles are not valid.</p></li><li><p class="paragraph">KEYWORDS_VALIDATION_FAILED - "Keywords validation failed" = At least one of the used keywords are not valid.</p></li><li><p class="paragraph">CLIENT_ISSUE - "Network: client issue" = The AdRequest has failed, most likely because of the client. Response code from the AdServer is between 400 and 499.</p></li><li><p class="paragraph">SERVER_ISSUE - "Network: server issue" = The AdRequest has failed, most likely because of the server. Response code from the AdServer is between 500 and 599.</p></li><li><p class="paragraph">UNKNOWN_STATUS_CODE - "Network: Unknown status code" = The AdRequest has failed with an unknown response code.</p></li><li><p class="paragraph">MALFORMED_URL - "Network: Malformed URL" = The URL from the AdRequest is not valid. The internal exception would be an MalformedURLException.</p></li><li><p class="paragraph">TIMED_OUT - "Network: Timeout" = The AdRequest has reach the max set timeout. The internal exception would be an SocketTimeoutException.</p></li><li><p class="paragraph">HOST_CONNECTION_ISSUE - "Network: host connection issue" = Problems with connection the host. The internal exception would be an ConnectException.</p></li><li><p class="paragraph">UNKNOWN_HOST - "Network: Unknown host" = Could not connect to the server because of an unknown host exception. The internal exception would be an UnknownHostException.</p></li><li><p class="paragraph">DEFAULT - "Unspecified error" = Default exception with no specific error description.</p></li><li><p class="paragraph">CUSTOM_RENDERER - "Custom renderer exception" = Exception in a custom renderer. Only used in custom renderer outside of the AdSDK project.</p></li></ul></ul><p class="paragraph">You have to decide how to handle errors within your App. For example, you could re-try requesting an Ad or fail silently and hide the ad space. Here an example how you could check for these errors:</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">is AdState.State.Error -&gt; {
    var adException = state.adException
    var adError = adException.adError
    when(adError) {
        AdError.DECODING -&gt; {
            // ...
        }
        AdError.TIMED_OUT -&gt; {
            // ...
        }
        AdError.DEFAULT -&gt; {
            // ...
        }
        else -&gt; {
            // ...
        }
    }
}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class=""> Creating custom native Ads</h2><p class="paragraph">As App developer, you can create your own custom ad formats. For example, you can implement interactive ad formats like surveys, rotating galleries or Ads that play video.</p><p class="paragraph">Your custom ad format can be configured in the Adition backend. There you can define a creative template with custom JSON that will be delivered as part of the ad. For example, you could provide a way to configure some styling aspects for the ad by adding custom JSON key-value-pairs to the creative template.</p><p class="paragraph">On the app side, you can implement your custom Ad with native technologies like Swift and SwiftUI (iOS) or Kotlin and Compose (Android).</p><p class="paragraph">As part of your custom ad you will need to:</p><ul><li><p class="paragraph">a renderer class which implements the <code class="lang-kotlin">AdRenderer</code> interface</p></li><li><p class="paragraph">register this renderer via the <code class="lang-kotlin">AdComposeRenderRegistry</code></p></li></ul><p class="paragraph">The new renderer have to take this <code class="lang-kotlin">Advertisement</code> object for the different info's and configurations.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">class ExampleAdRender(private val advertisement: Advertisement) : AdRenderer {</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">In the new renderer you need to override the <code class="lang-kotlin">RenderAd</code> composable function.</p><p class="paragraph">To register a new renderer you use the <code class="lang-kotlin">registerRendererWithName</code> function from the <code class="lang-kotlin">AdComposeRenderRegistry</code> object. The <code class="lang-kotlin">registerRendererWithName</code> with name will return the <code class="lang-kotlin">Advertisement</code> you create via the AdSDK.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">AdComposeRenderRegistry.registerRendererWithName("ExampleAdRender") {<br>ExampleAdRender(it)<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">For the communication with the AdSDK you need the <code class="lang-kotlin">AdState</code> and can get it like this: <code class="lang-kotlin">val adState = LocalAdState.current</code></p><p class="paragraph">There are three methods to interact with the AdSDK via <code class="lang-kotlin">AdState</code>.</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">- triggerAdClick(url: String)<br>- readyToDisplay()<br>- updateAdData(<br>        renderMetaData: MutableMap&lt;String, Any&gt;? = null,<br>        adData: MutableMap&lt;String, String&gt;? = null<br>    ) </code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">With the <code class="lang-kotlin">triggerAdClick</code> you can trigger a click event from the SDK. When the renderer is ready and you made sure all data are loaded and configs are set, you call <code class="lang-kotlin">readyToDisplay</code> to tell the SDK your new renderer is ready. With <code class="lang-kotlin">updateAdData</code> you can pass <code class="lang-kotlin">renderMetaData</code> and <code class="lang-kotlin">adData</code> back to the SDK and the App.</p></div></div>
  </div>
  <h2 class="">Packages</h2>
  <div class="table"><a data-name="992197799%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core" id="992197799%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core/index.html">com.adition.sdk_core</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="992197799%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div><span class="brief-comment"><a data-name="992197799%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core" id="992197799%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
            <p class="paragraph">This module contains the core functionality of the Adition Ad SDK which is independent on any display technology. This makes the sdk_core usable both for apps that use compose and in the future also for legacy  view based approaches. If your app uses compose, add the <code class="lang-kotlin">com.adition.sdk_presentation_compose</code> dependency.</p>
          </span></div>
      </div>
    </div>
<a data-name="1544749051%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.cache" id="1544749051%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.cache/index.html">com.adition.sdk_core.cache</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1544749051%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div><span class="brief-comment"><a data-name="1544749051%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.cache" id="1544749051%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
            <p class="paragraph">Local disk cache used for preserving ad assets.</p>
          </span></div>
      </div>
    </div>
<a data-name="-1981778503%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.internal.annotation" id="-1981778503%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.internal.annotation/index.html">com.adition.sdk_core.internal.annotation</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1981778503%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="380230091%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.internal.entities" id="380230091%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.internal.entities/index.html">com.adition.sdk_core.internal.entities</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="380230091%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="1226502750%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.internal.extensions" id="1226502750%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.internal.extensions/index.html">com.adition.sdk_core.internal.extensions</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1226502750%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="2041545571%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.internal.model" id="2041545571%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.internal.model/index.html">com.adition.sdk_core.internal.model</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="2041545571%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="-232017880%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.internal.network" id="-232017880%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.internal.network/index.html">com.adition.sdk_core.internal.network</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-232017880%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="-1652398672%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.mraid" id="-1652398672%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.mraid/index.html">com.adition.sdk_core.mraid</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="-1652398672%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="988213507%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.mraid.entities" id="988213507%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.mraid.entities/index.html">com.adition.sdk_core.mraid.entities</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="988213507%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
<a data-name="1898909575%2FPackages%2F-215846705" anchor-label="com.adition.sdk_core.mraid.helpers" id="1898909575%2FPackages%2F-215846705" data-filterable-set=":sdk_core:dokkaHtmlPartial/release"></a>
    <div class="table-row" data-filterable-current=":sdk_core:dokkaHtmlPartial/release" data-filterable-set=":sdk_core:dokkaHtmlPartial/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="com.adition.sdk_core.mraid.helpers/index.html">com.adition.sdk_core.mraid.helpers</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1898909575%2FPackages%2F-215846705"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2024 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
            </div>
        </div>
    </div>
</body>
</html>

